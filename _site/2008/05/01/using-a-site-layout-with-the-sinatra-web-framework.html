<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Using a Site Layout with the Sinatra Web Framework - bitfluxx.com</title>
    
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" />
    <link href="/stylesheets/print.css" media="print" rel="stylesheet" />
    <link href="/stylesheets/syntax.css" media="screen, projection" rel="stylesheet" />
    <!--[if IE]>
    <link href="/stylesheets/ie.css" media="screen, projection" rel="stylesheet" type="text/css" />
    <![endif]-->
  </head>
  
  <body id="blog">
    
    <header id="sitewide">
      <div id="name"><h1><a href="/">bitfluxx</a></h1></div>
      <nav>
        <ul>
          <li id="blog-link"><a href="/blog.html">Blog</a></li>
          <li id="projects-link"><a href="/projects.html">Projects</a></li>
          <li id="about-link"><a href="/about.html">About</a></li>
        </ul>
      </nav>
    </header>
    
    <section id="content"><article class="post">
  <header>
    <h1>Using a Site Layout with the Sinatra Web Framework</h1>
    <p><time datetime="" pubdate>Written 01 May 2008</time></p>
  </header>

  <p>The Sinatra web framework is very elegant, yet powerful. Once installed, all you have to do is map urls coming to Ruby functions, inside of which you can write ruby code to do just about anything.</p>
<div class="highlight"><pre><code class="ruby"><span class="n">get</span> <span class="s1">&#39;/&#39;</span> <span class="k">do</span>
  <span class="n">haml</span> <span class="ss">:index</span>
<span class="k">end</span>
</code></pre>
</div><p>In this exampple, it uses Sinatra&#8217;s built in haml function to run the <code>./views/index.haml</code> template.  But you can add whatever ruby code inside the functions you want, such as &#8220;hello world,&#8221; ActiveRecord or accept a form <span class="caps">POST</span>.</p>
<p>The one thing missing was the ability to have a sitewide layout, that would wrap the output from your routing. I searched the <a href="http://www.sinatrarb.com/docs/sinatra/index.html">Sinatra documentation</a> over and over, finally finding the <a href="http://www.sinatrarb.com/docs/sinatra/files/lib/sinatra_rb.html#M000099">layout function</a>.  There wasn&#8217;t much there, but playing around with the code I managed to figure out how it works.</p>
<p>By default, Sintara will look for a <code>./views/layout.ext</code> file to use as a template, where &#8220;ext&#8221; is replaced with your templating-system specific extenstion. For instance, if you&#8217;re using <a href="http://www.ruby-doc.org/stdlib/libdoc/erb/rdoc/">erb</a> it&#8217;s <code>layout.erb</code> and if it&#8217;s <a href="http://haml.hamptoncatlin.com/">haml</a> you use <code>layout.haml</code>. If you just return markup with your route, it will not use any template file.</p>
<p>Now, if you want to use a different layout than the standard one, you&#8217;ll have to specify that in your template function like so.</p>
<div class="highlight"><pre><code class="ruby"><span class="n">haml</span> <span class="ss">:index</span><span class="p">,</span> <span class="p">{</span><span class="ss">:layout</span> <span class="o">=&gt;</span> <span class="ss">:special</span><span class="p">}</span>
</code></pre>
</div><p>That&#8217;s it!</p>
<p>Hope this helps some people trying to figure out layouts in Sinatra.</p>
</article></section>

    <script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
    <script type="text/javascript">
      _uacct = "UA-3372951-1";
      urchinTracker();
    </script>
  </body>
</html>